---
title: node-stream
date: 2020-03-30 13:38:35
tags:
    - node
    - stream
categories:
    - node
---


小伙伴们肯定都在线看过电影，对比定义中的图-水桶管道流转图，source就是服务器端的视频，dest就是你自己的播放器(或者浏览器中的flash和h5 video)。大家想一下，看电影的方式就如同上面的图管道换水一样，一点点从服务端将视频流动到本地播放器，一边流动一边播放，最后流动完了也就播放完了

说明：视频播放的这个例子，如果我们不使用管道和流动的方式，直接先从服务端加载完视频文件，然后再播放。会造成很多问题
因内存占有太多而导致系统卡顿或者崩溃
因为我们的网速 内存 cpu运算速度都是有限的，而且还要有多个程序共享使用，一个视频文件加载完可能有几个g那么大。

stream的常见输出方式有三种：

输出控制台
http请求中的response
写入文件

应用场景
1.读取文件
2.拷贝文件
3.下载文件


参考
https://segmentfault.com/a/1190000020112581#item-4-9